<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout/layout}"
      layout:fragment="content">
<head>
    <meta charset="UTF-8">
    <title>MVIDIA Â· ERP - ê·¼íƒœê´€ë¦¬ï¸ Â· íœ´ê°€ ì‹ ì²­</title>
    <style>
        .requestVacation{ grid-column: 2; grid-row: 2; background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); width: 1200px; margin: 0 auto; }
        .requestVacation > .widget { background: #fff; border-radius: 10px; padding: 20px; box-shadow: 0 2px 10px rgba(0, 0, 0, .1); }
        .requestVacation{.form-group{margin-bottom:15px}
        .form-group label{display:block;margin-bottom:6px;font-weight:700}
        .form-group input,.form-group select,.form-group textarea{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}
        .button { display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: 12px; background-color: #0c197f; color: #fff; }
        .button:hover{background:#0050be; color:#fff}
        .btn-secondary {display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: 12px; color:#fff; background-color: #6c757d;}
        .btn-secondary:hover {background-color: #5a6268;}
    </style>
</head>
<body>
<div class="requestVacation">

    <div class="widget" id="home">
        <h3>ğŸ–ï¸ íœ´ê°€ ì‹ ì²­</h3>
        <br>

        <form id="vaForm" action="/attManage/insertVacation.attManage" method="post">
            <div class="form-group"><label>ì‹ ì²­ ìœ í˜•</label>
                <select name="vaCategory">
                    <option value="HDL">ë°˜ì°¨</option>
                    <option value="AL">ì—°ì°¨</option>
                    <option value="SL">ë³‘ê°€</option>
                    <option value="FO">ê²½ì¡°ì‚¬</option>
                    <option value="ML">ì¶œì‚°</option>
                    <option value="RL">í¬ìƒ</option>
                </select>
            </div>
            <div class="form-group"><label>ì‹œì‘ì¼</label><input name="vaStart" type="date"></div>
            <div class="form-group"><label>ì¢…ë£Œì¼</label><input name="vaEnd" type="date"></div>
            <div class="form-group"><label>ì‚¬ìœ </label><textarea name="vaReason" style="resize:none;" rows="4" placeholder="íœ´ê°€ ì‚¬ìœ "></textarea></div>
            <input type="hidden" name="empNo" th:value="${session.loginEmp.empNo}">
            <button type="summit"  class="button" >ì‹ ì²­</button>
            <a type="button" class="btn btn-secondary" th:href="@{/mainPage}">ì·¨ì†Œ</a>
        </form>
    </div>

    </div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // í¼ ìš”ì†Œ ì„ íƒ
        const vaCategory = document.querySelector('select[name="vaCategory"]');
        const vaStart = document.querySelector('input[name="vaStart"]');
        const vaEnd = document.querySelector('input[name="vaEnd"]');

        // vaCategory ë“œë¡­ë‹¤ìš´ì— 'change' ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        vaCategory.addEventListener('change', function() {
            // ì„ íƒëœ ì˜µì…˜ì´ "HDL" (ë°˜ì°¨)ì¸ì§€ í™•ì¸
            if (this.value === 'HDL') {
                const startDateValue = vaStart.value;
                const endDateValue = vaEnd.value;

                // ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì´ ëª¨ë‘ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
                if (startDateValue && endDateValue) {
                    // ë¹„êµë¥¼ ìœ„í•´ Date ê°ì²´ ìƒì„±
                    const startDate = new Date(startDateValue);
                    const endDate = new Date(endDateValue);

                    // ë” ì´ë¥¸ ë‚ ì§œë¥¼ ê²°ì •
                    const earlierDate = startDate < endDate ? startDateValue : endDateValue;

                    // ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ëª¨ë‘ ë” ì´ë¥¸ ë‚ ì§œë¡œ ì„¤ì •
                    vaStart.value = earlierDate;
                    vaEnd.value = earlierDate;
                } else if (startDateValue) {
                    // ì‹œì‘ì¼ë§Œ ì…ë ¥ëœ ê²½ìš°, ì¢…ë£Œì¼ì„ ì‹œì‘ì¼ë¡œ ì„¤ì •
                    vaEnd.value = startDateValue;
                } else if (endDateValue) {
                    // ì¢…ë£Œì¼ë§Œ ì…ë ¥ëœ ê²½ìš°, ì‹œì‘ì¼ì„ ì¢…ë£Œì¼ë¡œ ì„¤ì •
                    vaStart.value = endDateValue;
                }
            }
        });
    });
</script>
</body>
</html>