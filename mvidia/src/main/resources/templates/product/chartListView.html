<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      layout:fragment="content">
<head>
    <meta charset="UTF-8">
    <title>ChartListView</title>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <!-- ì§„í–‰ë¥  í¼ì„¼íŠ¸ ë°” -->
    <div class="progress-bar-horizontal">
        <div class="progress-fill" style="width:70%"></div>
    </div>
    <div class="progress-percentage">70%</div>

    <!-- ë¶ˆëŸ‰ë¥  ë„ë„› ì°¨íŠ¸ ë¶€ë¶„ -->
    <div class="donut-chart-container" style="--defect-rate: 72deg;">
        <div class="donut-chart-label">20%</div>
    </div>
    <!-- ì¶”í›„ ê°€ëŠ¥í•˜ë©´ ì‚¬ìš©í•˜ê¸° ìƒì„¸ë³´ê¸°-> ëª¨ë‹¬ì°½
    ì¼ì • ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ ë°”ì¸ë”© (onclick or addEventListener)
    í•´ë‹¹ ì¼ì • ID(schrId) Ajaxë¡œ ì¡°íšŒ â†’ ìƒì„¸ ë°ì´í„° ê°€ì ¸ì™€ì„œ ëª¨ë‹¬ì°½ ì¶œë ¥

    document.querySelectorAll(".schedule-item").forEach(item => {
      item.addEventListener("click", function() {
        const schId = this.dataset.schId;
        fetch(`/progress/detail/${schId}`)
          .then(res => res.json())
          .then(data => {
            // ëª¨ë‹¬ì°½ì— ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById("modal-title").innerText = data.schNo;
            document.getElementById("modal-body").innerText = JSON.stringify(data);
            $("#detailModal").modal("show");
          });
      });
    });
    -->


    <!--
        <h1>ğŸ› ï¸ ì‘ì—…ì§„í–‰í˜„í™©</h1>

     ì¢…ë£Œì„ë°•ìˆœ 5ê°œ ì¼ì •ë§Œ í‘œì‹œ
    <div th:each="schedule : ${dashboardData}">
        <p>
            <span th:text="${schedule.bpPartner}"></span>
            | ì§„í–‰ë¥ : <span th:text="${#numbers.formatDecimal(schedule.totalCount > 0 ? schedule.defCount*100.0/schedule.totalCount : 0, 0, 2)}"></span>%
        </p>
    </div>

    ë”ë³´ê¸° ë²„íŠ¼
    <a th:href="@{/scheduleList.bo}">ë”ë³´ê¸°</a>

     ì°¨íŠ¸ ì˜ì—­
    <canvas id="myChart"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('myChart');

        const labels = [
            /* Thymeleaf ë°˜ë³µë¬¸ìœ¼ë¡œ ì œí’ˆëª…/ì½”ë“œ ì‚½ì… */
            /* ì˜ˆì‹œ */
            <th:block th:each="p : ${progressData}">'[[${p.itemCode}]]',</th:block>
        ];
        const dataValues = [
            <th:block th:each="p : ${progressData}">[[${p.progRate}]],</th:block>
        ];

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'ì‘ì—… ì§„í–‰ë¥ ',
                    data: dataValues,
                    backgroundColor: '#186aea'
                }]
            },
            options: { responsive: true }
        });
    </script>
    -->
</body>
</html>